!function(e){var t=window.webpackHotUpdate;window.webpackHotUpdate=function(e,n){!function(e,t){if(!b[e]||!E[e])return;for(var n in E[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(p[n]=t[n]);0==--v&&0===_&&D()}(e,n),t&&t(e,n)};var n,i=!0,r="2fc53e893928d2b53c6a",o={},a=[],s=[];function l(e){var t=L[e];if(!t)return S;var i=function(i){return t.hot.active?(L[i]?-1===L[i].parents.indexOf(e)&&L[i].parents.push(e):(a=[e],n=i),-1===t.children.indexOf(i)&&t.children.push(i)):(console.warn("[HMR] unexpected require("+i+") from disposed module "+e),a=[]),S(i)},r=function(e){return{configurable:!0,enumerable:!0,get:function(){return S[e]},set:function(t){S[e]=t}}};for(var o in S)Object.prototype.hasOwnProperty.call(S,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(i,o,r(o));return i.e=function(e){return"ready"===d&&f("prepare"),_++,S.e(e).then(t,(function(e){throw t(),e}));function t(){_--,"prepare"===d&&(y[e]||M(e),0===_&&0===v&&D())}},i.t=function(e,t){return 1&t&&(e=i(e)),S.t(e,-2&t)},i}function c(t){var i={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:n!==t,active:!0,accept:function(e,t){if(void 0===e)i._selfAccepted=!0;else if("function"==typeof e)i._selfAccepted=e;else if("object"==typeof e)for(var n=0;n<e.length;n++)i._acceptedDependencies[e[n]]=t||function(){};else i._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)i._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)i._declinedDependencies[e[t]]=!0;else i._declinedDependencies[e]=!0},dispose:function(e){i._disposeHandlers.push(e)},addDisposeHandler:function(e){i._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=i._disposeHandlers.indexOf(e);t>=0&&i._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,d){case"idle":(p={})[t]=e[t],f("ready");break;case"ready":k(t);break;case"prepare":case"check":case"dispose":case"apply":(m=m||[]).push(t)}},check:T,apply:C,status:function(e){if(!e)return d;u.push(e)},addStatusHandler:function(e){u.push(e)},removeStatusHandler:function(e){var t=u.indexOf(e);t>=0&&u.splice(t,1)},data:o[t]};return n=void 0,i}var u=[],d="idle";function f(e){d=e;for(var t=0;t<u.length;t++)u[t].call(null,e)}var h,p,g,m,v=0,_=0,y={},E={},b={};function w(e){return+e+""===e?+e:e}function T(e){if("idle"!==d)throw new Error("check() is only allowed in idle status");return i=e,f("check"),(t=1e4,t=t||1e4,new Promise((function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var i=new XMLHttpRequest,o=S.p+""+r+".hot-update.json";i.open("GET",o,!0),i.timeout=t,i.send(null)}catch(e){return n(e)}i.onreadystatechange=function(){if(4===i.readyState)if(0===i.status)n(new Error("Manifest request to "+o+" timed out."));else if(404===i.status)e();else if(200!==i.status&&304!==i.status)n(new Error("Manifest request to "+o+" failed."));else{try{var t=JSON.parse(i.responseText)}catch(e){return void n(e)}e(t)}}}))).then((function(e){if(!e)return f(x()?"ready":"idle"),null;E={},y={},b=e.c,g=e.h,f("prepare");var t=new Promise((function(e,t){h={resolve:e,reject:t}}));p={};return M(0),"prepare"===d&&0===_&&0===v&&D(),t}));var t}function M(e){b[e]?(E[e]=!0,v++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=S.p+""+e+"."+r+".hot-update.js",document.head.appendChild(t)}(e)):y[e]=!0}function D(){f("ready");var e=h;if(h=null,e)if(i)Promise.resolve().then((function(){return C(i)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var n in p)Object.prototype.hasOwnProperty.call(p,n)&&t.push(w(n));e.resolve(t)}}function C(t){if("ready"!==d)throw new Error("apply() is only allowed in ready status");return function t(i){var s,l,c,u,d;function h(e){for(var t=[e],n={},i=t.map((function(e){return{chain:[e],id:e}}));i.length>0;){var r=i.pop(),o=r.id,a=r.chain;if((u=L[o])&&(!u.hot._selfAccepted||u.hot._selfInvalidated)){if(u.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:o};if(u.hot._main)return{type:"unaccepted",chain:a,moduleId:o};for(var s=0;s<u.parents.length;s++){var l=u.parents[s],c=L[l];if(c){if(c.hot._declinedDependencies[o])return{type:"declined",chain:a.concat([l]),moduleId:o,parentId:l};-1===t.indexOf(l)&&(c.hot._acceptedDependencies[o]?(n[l]||(n[l]=[]),v(n[l],[o])):(delete n[l],t.push(l),i.push({chain:a.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];-1===e.indexOf(i)&&e.push(i)}}x();var _={},y=[],E={},T=function(){console.warn("[HMR] unexpected require("+D.moduleId+") to disposed module")};for(var M in p)if(Object.prototype.hasOwnProperty.call(p,M)){var D;d=w(M),D=p[M]?h(d):{type:"disposed",moduleId:M};var C=!1,k=!1,A=!1,O="";switch(D.chain&&(O="\nUpdate propagation: "+D.chain.join(" -> ")),D.type){case"self-declined":i.onDeclined&&i.onDeclined(D),i.ignoreDeclined||(C=new Error("Aborted because of self decline: "+D.moduleId+O));break;case"declined":i.onDeclined&&i.onDeclined(D),i.ignoreDeclined||(C=new Error("Aborted because of declined dependency: "+D.moduleId+" in "+D.parentId+O));break;case"unaccepted":i.onUnaccepted&&i.onUnaccepted(D),i.ignoreUnaccepted||(C=new Error("Aborted because "+d+" is not accepted"+O));break;case"accepted":i.onAccepted&&i.onAccepted(D),k=!0;break;case"disposed":i.onDisposed&&i.onDisposed(D),A=!0;break;default:throw new Error("Unexception type "+D.type)}if(C)return f("abort"),Promise.reject(C);if(k)for(d in E[d]=p[d],v(y,D.outdatedModules),D.outdatedDependencies)Object.prototype.hasOwnProperty.call(D.outdatedDependencies,d)&&(_[d]||(_[d]=[]),v(_[d],D.outdatedDependencies[d]));A&&(v(y,[D.moduleId]),E[d]=T)}var P,N=[];for(l=0;l<y.length;l++)d=y[l],L[d]&&L[d].hot._selfAccepted&&E[d]!==T&&!L[d].hot._selfInvalidated&&N.push({module:d,parents:L[d].parents.slice(),errorHandler:L[d].hot._selfAccepted});f("dispose"),Object.keys(b).forEach((function(e){!1===b[e]&&function(e){delete installedChunks[e]}(e)}));var R,I,B=y.slice();for(;B.length>0;)if(d=B.pop(),u=L[d]){var H={},j=u.hot._disposeHandlers;for(c=0;c<j.length;c++)(s=j[c])(H);for(o[d]=H,u.hot.active=!1,delete L[d],delete _[d],c=0;c<u.children.length;c++){var U=L[u.children[c]];U&&((P=U.parents.indexOf(d))>=0&&U.parents.splice(P,1))}}for(d in _)if(Object.prototype.hasOwnProperty.call(_,d)&&(u=L[d]))for(I=_[d],c=0;c<I.length;c++)R=I[c],(P=u.children.indexOf(R))>=0&&u.children.splice(P,1);f("apply"),void 0!==g&&(r=g,g=void 0);for(d in p=void 0,E)Object.prototype.hasOwnProperty.call(E,d)&&(e[d]=E[d]);var V=null;for(d in _)if(Object.prototype.hasOwnProperty.call(_,d)&&(u=L[d])){I=_[d];var F=[];for(l=0;l<I.length;l++)if(R=I[l],s=u.hot._acceptedDependencies[R]){if(-1!==F.indexOf(s))continue;F.push(s)}for(l=0;l<F.length;l++){s=F[l];try{s(I)}catch(e){i.onErrored&&i.onErrored({type:"accept-errored",moduleId:d,dependencyId:I[l],error:e}),i.ignoreErrored||V||(V=e)}}}for(l=0;l<N.length;l++){var G=N[l];d=G.module,a=G.parents,n=d;try{S(d)}catch(e){if("function"==typeof G.errorHandler)try{G.errorHandler(e)}catch(t){i.onErrored&&i.onErrored({type:"self-accept-error-handler-errored",moduleId:d,error:t,originalError:e}),i.ignoreErrored||V||(V=t),V||(V=e)}else i.onErrored&&i.onErrored({type:"self-accept-errored",moduleId:d,error:e}),i.ignoreErrored||V||(V=e)}}if(V)return f("fail"),Promise.reject(V);if(m)return t(i).then((function(e){return y.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e}));return f("idle"),new Promise((function(e){e(y)}))}(t=t||{})}function x(){if(m)return p||(p={}),m.forEach(k),m=void 0,!0}function k(t){Object.prototype.hasOwnProperty.call(p,t)||(p[t]=e[t])}var L={};function S(t){if(L[t])return L[t].exports;var n=L[t]={i:t,l:!1,exports:{},hot:c(t),parents:(s=a,a=[],s),children:[]};return e[t].call(n.exports,n,n.exports,l(t)),n.l=!0,n.exports}S.m=e,S.c=L,S.d=function(e,t,n){S.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},S.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},S.t=function(e,t){if(1&t&&(e=S(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(S.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)S.d(n,i,function(t){return e[t]}.bind(null,i));return n},S.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return S.d(t,"a",t),t},S.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},S.p="./",S.h=function(){return r},l(10)(S.s=10)}([function(e,t,n){"use strict";function i(e){var t=getSelection();t&&(t.removeAllRanges(),t.addRange(e))}function r(){var e=getSelection();return e?e.getRangeAt(0):null}Object.defineProperty(t,"__esModule",{value:!0}),t.setRangeByElement=t.setRangeByWbr=t.getRange=t.setSelectionFocus=void 0,t.setSelectionFocus=i,t.getRange=r,t.setRangeByWbr=function(e,t){var n,o,a;void 0===t&&(t=null!==(n=r())&&void 0!==n?n:document.createRange());var s=e.querySelector("wbr");s&&(s.previousSibling?s.previousSibling.nodeType===Node.TEXT_NODE?t.setStart(s.previousSibling,null!==(a=null===(o=s.previousSibling.textContent)||void 0===o?void 0:o.length)&&void 0!==a?a:0):s.previousSibling.nodeType===Node.ELEMENT_NODE&&t.setStartBefore(s):s.nextSibling?t.setStart(s.nextSibling,0):s.parentElement&&t.setStart(s.parentElement,0),s.remove(),i(t))},t.setRangeByElement=function(e,t){void 0===t&&(t="before");var n=document.createRange();n.selectNodeContents(e),n.collapse("before"===t),i(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addClass=t.getIndexByParents=t.isMacSystem=t.hasClass=t.replaceElement=t.findParentElement=void 0;var i=n(2);t.findParentElement=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=null,a=!1;if(0===n.length?(o=null,a=!1):1===n.length?i.isBoolean(n[0])?(o=null,a=n[0]):(o=n[0],a=!1):(o=n[0],a=n[1]),e)for(var s=a?e:e.parentElement;s&&(!o||!o(s));){if(t(s))return s;s=s.parentElement}return null},t.replaceElement=function(e,t){e.parentElement&&e.parentElement.replaceChild(t,e)},t.hasClass=function(e,t){return(" "+e.className).includes(" "+t)},t.isMacSystem=function(){return navigator.platform.toUpperCase().includes("MAC")},t.getIndexByParents=function(e){var t=e.parentElement;if(t)for(var n=0;n<t.childElementCount;n++)if(t.children[n]===e)return n;return-1},t.addClass=function e(t,n){var r;i.isString(n)?t.classList.add(n):i.isArray(n)?n.forEach((function(n){return e(t,n)})):(r=t.classList).add.apply(r,Object.keys(n).filter((function(e){return n[e]})))}},function(e,t,n){"use strict";function i(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function r(e){return i(e,"String")}Object.defineProperty(t,"__esModule",{value:!0}),t.addSizeUnit=t.isArray=t.isBoolean=t.isString=void 0,t.isString=r,t.isBoolean=function(e){return i(e,"Boolean")},t.isArray=function(e){return i(e,"Array")},t.addSizeUnit=function(e,t){return void 0===t&&(t="px"),r(e)?e:e+t}},function(e,t,n){e.exports={editor:"_1cJFdWNvuRun8mj-as6hC9",content:"_1eajlF6H7YFaDA3tqZ2TzY",show:"_37SvFS6B5rc5v33xAxlIL8",hljs:"_2ImVevshntHf2bMAcTb6Qu","highlight-chroma":"_3R0WGJROGlGYat4sIYenGQ"}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getClosestByClassName=t.getClosestByAttribute=t.getClosestBlock=t.getClosestElement=void 0;var r=n(1),o=i(n(3)),a=["header","section","footer","div","ul","ol","li","form","dl","dt","h1","h2","h3","h4","h5","h6","p","table"];function s(e){return e.nodeType===Node.ELEMENT_NODE?e:e.nodeType===Node.TEXT_NODE?e.parentElement:null}t.getClosestElement=s,t.getClosestBlock=function(e){return r.findParentElement(s(e),(function(e){return a.includes(e.tagName.toLocaleLowerCase())||r.hasClass(e,o.default.content)}),!0)},t.getClosestByAttribute=function(e,t,n){return r.findParentElement(s(e),(function(e){return e.getAttribute(t)===n}),!0)},t.getClosestByClassName=function(e,t){return r.findParentElement(s(e),(function(e){return r.hasClass(e,t)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setColAlign=t.deleteTable=t.deleteCol=t.deleteRow=t.insertCol=t.insertRow=t.findTableElement=t.findTableCellsElement=void 0;var i=n(1);function r(e){return i.findParentElement(e,(function(e){return["th","td"].includes(e.tagName.toLocaleLowerCase())}),!0)}function o(e){return i.findParentElement(e,(function(e){return"table"===e.tagName.toLocaleLowerCase()}))}t.findTableCellsElement=r,t.findTableElement=o,t.insertRow=function(e,t,n){var i;void 0===t&&(t="after"),void 0===n&&(n=1);var a=r(e);if(a){var s="th"===a.tagName.toLocaleLowerCase(),l=o(a);if(s&&"before"===t)throw new Error("表头不得向上添加行!");var c=Array(n).fill("").reduce((function(e,t,n){return e+"<tr>"+Array(l.rows[0].childElementCount).fill("").reduce((function(e,t,i){return e+"<td>"+(0===n&&0===i?"<wbr>":"")+"</td>"}),"")+"</tr>"}),"");if(s){var u=l.querySelector("tbody");u?u.insertAdjacentHTML("afterbegin",c):l.insertAdjacentHTML("beforeend","<tbody>"+c+"</tbody>")}else null===(i=a.parentElement)||void 0===i||i.insertAdjacentHTML("before"===t?"beforebegin":"afterend",c)}},t.insertCol=function(e,t,n){void 0===t&&(t="after"),void 0===n&&(n=1);var a=r(e);if(a)for(var s=i.getIndexByParents(a),l=o(a).querySelectorAll("tr"),c=function(e){l[e].children[s].insertAdjacentHTML("before"===t?"beforebegin":"afterend",Array(n).fill("").reduce((function(t){return t+"<"+(0===e?"th":"td")+"></"+(0===e?"th":"td")+">"}),""))},u=0;u<l.length;u++)c(u)},t.deleteRow=function(e){var t=i.findParentElement(e,(function(e){return"tr"===e.tagName.toLocaleLowerCase()}),!0);t&&t.remove()},t.deleteCol=function(e){var t=r(e),n=o(e);if(t&&n)for(var a=i.getIndexByParents(t),s=0;s<n.rows.length;s++)n.rows[s].children[a].remove()},t.deleteTable=function(e){var t;null===(t=o(e))||void 0===t||t.remove()},t.setColAlign=function(e,t){var n=r(e),a=o(e);if(n&&a)for(var s=i.getIndexByParents(n),l=0;l<a.rows.length;l++)a.rows[l].children[s].align=t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.override=t.autoBind=void 0,t.autoBind=function(e,t,n){var i=n.configurable,r=n.enumerable,o=n.value;return{configurable:i,enumerable:r,get:function(){if(!o)throw new Error("函数不得为空");return o.bind(this)}}},t.override=function(e,t,n){return{configurable:n.configurable,enumerable:n.enumerable,value:function(){console.warn("需要重写"+e.constructor.name+"的"+t+"方法!")}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.input=void 0;var i=n(0),r=n(4),o=n(17),a=n(8);t.input=function(e,t){var n,s,l=r.getClosestBlock(t.startContainer);if(t.insertNode(document.createElement("wbr")),e.ir&&e.ir.contentDom&&e.ir.contentDom.innerHTML){var c=void 0;c=l&&l!==e.ir.contentDom?l.outerHTML:e.ir.contentDom.innerHTML,o.log("ir/input",c,"解析md内容",e.options.debugger);var u=null!==(s=null===(n=e.lute)||void 0===n?void 0:n.SpinVditorIRDOM(c))&&void 0!==s?s:"";e.options.transform&&(u=e.options.transform(u)),o.log("ir/input",u,"渲染内容",e.options.debugger),l&&l!==e.ir.contentDom?l.outerHTML=u:e.ir.contentDom.innerHTML=u,a.processAfterRender(e),i.setRangeByWbr(e.ir.contentDom,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processAfterRender=void 0;var i=null;t.processAfterRender=function(e){i&&clearTimeout(i),i=window.setTimeout((function(){e.undo&&e.undo.addToUndoStack(),i=null}),500)}},function(e,t,n){e.exports={modalContainer:"_3SJB-29BLlmDnkYUeGPa20",mask:"_9JOx9FELvU0Wp7ijItdWj",active:"f8k01mJv9geInK7CPGiKL",tableMenuMask:"_2F7PJszNSM2dZve4qelura",modal:"_2mViOn-paGRkX2BItvJGar",menuItem:"_2eNEm3rYn93pAAlTBgR75X",splitLineTop:"_3UwqGOHnJ2blH0A_QlyEWF",splitLineBottom:"_3aXLAGz6c5-SITqfeJPUQF",title:"_2U6RvSfJNj9l67bxyH7Q_7",checkBox:"_49eVRQQqNjvM-9FkdFc63",subTitle:"_3Ph8WIzWLYxdHpnIt8P6Oj"}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(11),new(i(n(12)).default)({el:".editor",placeholder:"test",debugger:!0})},function(e,t,n){},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(13)),s=n(2),l=n(14),c=o(n(16)),u=n(25),d=n(26);n(27);var f=o(n(28)),h=function(){function e(e){var t;t=s.isString(e)||e instanceof HTMLElement?{el:e}:e;var n=new a.default(t).getOptions(),i=n.el instanceof HTMLElement?n.el:document.querySelector(n.el);if(null===i)throw new Error("找不到容器节点!");this.editor={options:n,element:i},this.injectLute(),l.initUi(this.editor),this.editor.ir=new c.default(this.editor),this.editor.undo=new f.default(this.editor),this.editor.ir.show()}return e.prototype.injectLute=function(){var e,t,n,o,a,s,l,c,f,h,p,g,m,v;return i(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return window.Lute?[3,2]:[4,u.addScript(this.editor.options.LuteUrl,"LuteScript")];case 1:i.sent(),i.label=2;case 2:return this.editor.lute=d.createdLute({autoSpace:null===(e=this.editor.options.preview.markdown)||void 0===e?void 0:e.autoSpace,chinesePunct:null===(t=this.editor.options.preview.markdown)||void 0===t?void 0:t.chinesePunct,codeBlockPreview:null===(n=this.editor.options.preview.markdown)||void 0===n?void 0:n.codeBlockPreview,emojiSite:null!==(o=this.editor.options.hint.emojiPath)&&void 0!==o?o:"",emojis:null!==(a=this.editor.options.hint.emoji)&&void 0!==a?a:{},fixTermTypo:null===(s=this.editor.options.preview.markdown)||void 0===s?void 0:s.fixTermTypo,footnotes:null===(l=this.editor.options.preview.markdown)||void 0===l?void 0:l.footnotes,headingAnchor:!1,inlineMathDigit:null===(c=this.editor.options.preview.math)||void 0===c?void 0:c.inlineDigit,linkBase:null===(f=this.editor.options.preview.markdown)||void 0===f?void 0:f.linkBase,listStyle:null===(h=this.editor.options.preview.markdown)||void 0===h?void 0:h.listStyle,paragraphBeginningSpace:null===(p=this.editor.options.preview.markdown)||void 0===p?void 0:p.paragraphBeginningSpace,sanitize:null===(g=this.editor.options.preview.markdown)||void 0===g?void 0:g.sanitize,setext:null===(m=this.editor.options.preview.markdown)||void 0===m?void 0:m.setext,toc:null===(v=this.editor.options.preview.markdown)||void 0===v?void 0:v.toc}),[2]}}))}))},e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=function(){function e(e){this.defaultOptions={width:"80%",height:"100%",minHeight:"30vh",placeholder:"",LuteUrl:"./lib/lute.min.js",debugger:!1,transform:null,preview:{markdown:{autoSpace:!1,chinesePunct:!1,codeBlockPreview:!0,fixTermTypo:!1,footnotes:!0,linkBase:"",listStyle:!1,sanitize:!0,setext:!1,theme:"light",toc:!1},math:{inlineDigit:!1}},hint:{emoji:{"+1":"👍","-1":"👎",confused:"😕",eyes:"👀️",heart:"❤️",rocket:"🚀️",smile:"😄",tada:"🎉️"},emojiPath:""}},this.options=e}return e.prototype.getOptions=function(){return this.options.width&&(this.options.width=i.addSizeUnit(this.options.width)),this.options.height&&(this.options.height=i.addSizeUnit(this.options.height)),this.options.minHeight&&(this.options.minHeight=i.addSizeUnit(this.options.minHeight)),this.options.preview&&(this.options.preview=Object.assign({},this.defaultOptions.preview,this.options.preview)),this.options.hint&&(this.options.hint=Object.assign({},this.defaultOptions.hint,this.options.hint)),Object.assign({},this.defaultOptions,this.options)},e}();t.default=r},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initUi=void 0;var r=i(n(3)),o=i(n(15));t.initUi=function(e){e.element.classList.add(o.default.reset),e.element.classList.add(r.default.editor),e.element.style.height=e.options.height,e.element.style.minHeight=e.options.minHeight}},function(e,t,n){e.exports={reset:"_vi542ICFUJX5Y_AmqAKc"}},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(3)),l=n(6),c=n(7),u=n(18),d=n(21),f=function(){function e(e){this.editor=e,this.contentDom=document.createElement("pre"),this.render()}return e.prototype.render=function(){this.contentDom.classList.add(s.default.content),this.contentDom.contentEditable="true",this.contentDom.setAttribute("placeholder",this.editor.options.placeholder),this.contentDom.style.width=this.editor.options.width,this.editor.element.appendChild(this.contentDom)},e.prototype.bind=function(){this.unbind(),this.contentDom.addEventListener("keydown",this.keydownHandler),this.contentDom.addEventListener("input",this.inputHandler),this.contentDom.addEventListener("mousedown",this.mousedownHandler),window.addEventListener("contextmenu",this.contextmenuHandler)},e.prototype.unbind=function(){this.contentDom.removeEventListener("keydown",this.keydownHandler),this.contentDom.removeEventListener("input",this.inputHandler),this.contentDom.removeEventListener("mousedown",this.mousedownHandler),window.removeEventListener("contextmenu",this.contextmenuHandler)},e.prototype.inputHandler=function(){var e=getSelection();if(e){var t=e.getRangeAt(0).cloneRange();c.input(this.editor,t)}},e.prototype.keydownHandler=function(e){u.processKeydown(this.editor,e)},e.prototype.mousedownHandler=function(e){d.processMousedown(this.editor,e)},e.prototype.contextmenuHandler=function(e){e.preventDefault()},e.prototype.show=function(){this.bind(),this.contentDom.classList.add(s.default.show)},e.prototype.hide=function(){this.unbind(),this.contentDom.classList.remove(s.default.show)},r([l.autoBind,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],e.prototype,"inputHandler",null),r([l.autoBind,o("design:type",Function),o("design:paramtypes",[KeyboardEvent]),o("design:returntype",void 0)],e.prototype,"keydownHandler",null),r([l.autoBind,o("design:type",Function),o("design:paramtypes",[MouseEvent]),o("design:returntype",void 0)],e.prototype,"mousedownHandler",null),r([l.autoBind,o("design:type",Function),o("design:paramtypes",[MouseEvent]),o("design:returntype",void 0)],e.prototype,"contextmenuHandler",null),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=void 0,t.log=function(e,t,n,i){i&&console.log(e+" - "+n+": "+t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processKeydown=void 0;var i=n(19);t.processKeydown=function(e,t){var n=document.getSelection().getRangeAt(0);i.fixCodeLanguage(e,t,n)||i.fixCodeBlock(e,t,n)||i.fixTable(e,t,n)||i.fixUndo(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fixUndo=t.fixTable=t.fixCodeBlock=t.fixCodeLanguage=void 0;var i=n(4),r=n(7),o=n(20),a=n(5),s=n(0),l=n(1);t.fixCodeLanguage=function(e,t,n){var r=i.getClosestByAttribute(n.startContainer,"data-type","code-block-info");return!(!r||"Enter"!==t.key&&"Tab"!==t.key)&&(n.selectNodeContents(r.nextElementSibling.firstChild),n.collapse(!1),t.preventDefault(),!0)},t.fixCodeBlock=function(e,t,n){var r,a,s,l=i.getClosestByClassName(n.startContainer,"vditor-ir__marker--pre");return!(!l||!o.isOnlyTouchEnter(t))&&((null===(a=null===(r=l.firstElementChild)||void 0===r?void 0:r.textContent)||void 0===a?void 0:a.endsWith("\n"))||null===(s=l.firstElementChild)||void 0===s||s.insertAdjacentText("beforeend","\n"),n.insertNode(document.createTextNode("\n")),n.collapse(!1),t.preventDefault(),!0)},t.fixTable=function(e,t,n){var c,u,d,f,h,p,g,m,v=i.getClosestBlock(n.startContainer);if(v){if(o.isOnlyTouchEnter(t)){var _=null!==(u=null===(c=v.textContent)||void 0===c?void 0:c.trim())&&void 0!==u?u:"";if(_){var y=null!==(d=_.split("|"))&&void 0!==d?d:[];if(y.length>=3&&_.startsWith("|")&&_.endsWith("|"))return v.textContent=_+"\n"+y.reduce((function(e,t,n){return e+(0===n||n===y.length-1?"":" --- |")}),"|")+"\n|",n.selectNodeContents(v),n.collapse(!1),r.input(e,n),t.preventDefault(),!0}}if("table"===v.tagName.toLocaleLowerCase()){var E;if(o.matchHotKey("⌘-Enter",t))return(E=i.getClosestElement(n.startContainer))&&a.insertRow(E),s.setRangeByWbr(v,n),t.preventDefault(),!0;if(o.matchHotKey("⌘-⇧-Enter",t))return(E=i.getClosestElement(n.startContainer))&&a.insertCol(E,"after"),t.preventDefault(),!0;if(o.matchHotKey("⌘-←",t))return(E=i.getClosestElement(n.startContainer))&&a.setColAlign(E,"left"),t.preventDefault(),!0;if(o.matchHotKey("⌘-→",t))return(E=i.getClosestElement(n.startContainer))&&a.setColAlign(E,"right"),t.preventDefault(),!0;if("ArrowUp"===t.code||"ArrowDown"===t.code)if(E=i.getClosestElement(n.startContainer)){var b=a.findTableCellsElement(E);if(b){var w=null;if("th"===b.tagName.toLocaleLowerCase())if("ArrowUp"===t.code)w=v.previousElementSibling;else if(v.rows.length>1){var T=l.getIndexByParents(b);w=v.rows[1].children[T]}else w=v.nextElementSibling;else if("ArrowUp"!==t.code||(null===(f=b.parentElement)||void 0===f?void 0:f.previousElementSibling))if("ArrowDown"!==t.code||(null===(h=b.parentElement)||void 0===h?void 0:h.nextElementSibling)){var M=null!==(m="ArrowUp"===t.code?null===(p=b.parentElement)||void 0===p?void 0:p.previousElementSibling:null===(g=b.parentElement)||void 0===g?void 0:g.nextElementSibling)&&void 0!==m?m:null;if(M){T=l.getIndexByParents(b);w=M.children[T]}}else w=v.nextElementSibling;else{var T=l.getIndexByParents(b);w=v.querySelectorAll("th")[T]}return w&&s.setRangeByElement(w,"after"),t.preventDefault(),!0}}}}return!1},t.fixUndo=function(e,t){var n,i,r=!0;return o.matchHotKey("⌘-z",t)?null===(n=e.undo)||void 0===n||n.undo():o.matchHotKey("⇧-⌘-z",t)?null===(i=e.undo)||void 0===i||i.redo():r=!1,r&&t.preventDefault(),r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchHotKey=t.parseKey=t.isOnlyTouchEnter=t.isTouchCtrlKey=void 0;var i=n(1);function r(e){return i.isMacSystem()?e.metaKey&&!e.ctrlKey:!e.metaKey&&e.ctrlKey}function o(e){var t;switch(e){case"↑":t="ArrowUp";break;case"↓":t="ArrowDown";break;case"←":t="ArrowLeft";break;case"→":t="ArrowRight";break;default:t=e}return t}t.isTouchCtrlKey=r,t.isOnlyTouchEnter=function(e){return!r(e)&&!e.altKey&&!e.shiftKey&&"Enter"===e.key},t.parseKey=o,t.matchHotKey=function(e,t,n){void 0===n&&(n="-");var i=e.split(n),a=o(i[i.length-1]),s=i.some((function(e){return"ctrl"===e||"⌘"===e})),l=i.some((function(e){return"alt"===e||"⌥"===e})),c=i.some((function(e){return"shift"===e||"⇧"===e}));return a.toLocaleLowerCase()===t.key.toLocaleLowerCase()&&(s&&r(t)||!s&&!r(t))&&(l&&t.altKey||!l&&!t.altKey)&&(c&&t.shiftKey||!c&&!t.shiftKey)}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.processMousedown=void 0;var r=n(5),o=i(n(22)),a=n(0);t.processMousedown=function(e,t){2===t.button&&function(e,t){if(t.target instanceof HTMLElement){var n=o.default.getTableMenu(e);if(r.findTableElement(t.target)){var i=r.findTableCellsElement(t.target);i&&(a.setRangeByElement(i,"after"),n.show({left:t.clientX,top:t.clientY})),t.preventDefault(),t.stopPropagation()}}}(e,t)}},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a,s=o(n(23)),l=o(n(9)),c=n(0),u=n(5),d=n(4),f=n(24),h=n(8);!function(e){e.EVENT_ADD_ROW_ABOVE="EVENT_ADD_ROW_ABOVE",e.EVENT_ADD_ROW_BELOW="EVENT_ADD_ROW_BELOW",e.EVENT_ADD_COL_BEFORE="EVENT_ADD_COL_BEFORE",e.EVENT_ADD_COL_AFTER="EVENT_ADD_COL_AFTER",e.EVENT_ALIGN_GROUP="EVENT_ALIGN_GROUP",e.EVENT_ALIGN_LEFT="EVENT_ALIGN_LEFT",e.EVENT_ALIGN_CENTER="EVENT_ALIGN_CENTER",e.EVENT_ALIGN_RIGHT="EVENT_ALIGN_RIGHT",e.EVENT_DELETE_ROW="EVENT_DELETE_ROW",e.EVENT_DELETE_COL="EVENT_DELETE_COL",e.EVENT_DELETE_TABLE="EVENT_DELETE_TABLE",e.EVENT_COPY_HTML="EVENT_COPY_HTML",e.EVENT_COPY_MD=" EVENT_COPY_MD"}(a||(a={}));var p=function(e){function t(t){var n=e.call(this,{maskClassName:l.default.tableMenuMask})||this;return n.menuList=[{text:"上方增加行",key:a.EVENT_ADD_ROW_ABOVE},{text:"下方增加行",subText:"⌘+Enter",splitLineBottom:!0,key:a.EVENT_ADD_ROW_BELOW},{text:"左侧增加列",key:a.EVENT_ADD_COL_BEFORE},{text:"右侧增加列",subText:"⌘+⇧+Enter",splitLineBottom:!0,key:a.EVENT_ADD_COL_AFTER},{text:"对齐方式",splitLineBottom:!0,key:a.EVENT_ALIGN_GROUP,children:[{text:"左对齐",key:a.EVENT_ALIGN_LEFT,subText:"⌘+←",type:"checkItem"},{text:"居中",key:a.EVENT_ALIGN_CENTER,type:"checkItem"},{text:"右对齐",key:a.EVENT_ALIGN_RIGHT,subText:"⌘+→",type:"checkItem"}]},{text:"删除当前行",key:a.EVENT_DELETE_ROW},{text:"删除当前列",key:a.EVENT_DELETE_COL},{text:"删除表格",splitLineBottom:!0,key:a.EVENT_DELETE_TABLE},{text:"复制表格",key:a.EVENT_COPY_HTML},{text:"复制表格md",key:a.EVENT_COPY_MD}],n.editor=t,n}return r(t,e),t.getTableMenu=function(e){return null===t.tableMenu&&(t.tableMenu=new t(e)),t.tableMenu},t.prototype.contentRender=function(){var e=this,t=document.createElement("ul");return this.menuList.forEach((function(n){return t.appendChild(e.createdMenuItem(n,"li"))})),t},t.prototype.getTableHtml=function(e){var t,n;return null!==(n=null===(t=u.findTableElement(e))||void 0===t?void 0:t.outerHTML)&&void 0!==n?n:""},t.prototype.getCurrentAlign=function(){var e=c.getRange();if(e){var t=d.getClosestElement(e.startContainer);if(t){var n=u.findTableCellsElement(t);return n?n.align:""}}return""},t.prototype.menuItemClickHandler=function(e){var t=c.getRange();if(t){var n=u.findTableCellsElement(d.getClosestElement(t.startContainer));if(n){var i=!0;switch(e){case a.EVENT_ADD_COL_AFTER:u.insertCol(n,"after"),h.processAfterRender(this.editor);break;case a.EVENT_ADD_COL_BEFORE:u.insertCol(n,"before"),h.processAfterRender(this.editor);break;case a.EVENT_ADD_ROW_ABOVE:u.insertRow(n,"before"),h.processAfterRender(this.editor);break;case a.EVENT_ADD_ROW_BELOW:u.insertRow(n,"after"),h.processAfterRender(this.editor);break;case a.EVENT_ALIGN_CENTER:u.setColAlign(n,"center"),h.processAfterRender(this.editor);break;case a.EVENT_ALIGN_LEFT:u.setColAlign(n,"left"),h.processAfterRender(this.editor);break;case a.EVENT_ALIGN_RIGHT:u.setColAlign(n,"right"),h.processAfterRender(this.editor);break;case a.EVENT_COPY_HTML:f.copy(this.getTableHtml(n),"text/html");break;case a.EVENT_COPY_MD:this.editor.lute&&f.copy(this.editor.lute.VditorIRDOM2Md(this.getTableHtml(n)));break;case a.EVENT_DELETE_COL:u.deleteCol(n),h.processAfterRender(this.editor);break;case a.EVENT_DELETE_ROW:u.deleteRow(n),h.processAfterRender(this.editor);break;case a.EVENT_DELETE_TABLE:u.deleteTable(n),h.processAfterRender(this.editor);break;default:i=!1}i&&this.hide()}}},t.prototype.subMenuShowHandler=function(e){this.clearAllCheckedStatus(e);var t="";switch(this.getCurrentAlign()){case"left":t=a.EVENT_ALIGN_LEFT;break;case"center":t=a.EVENT_ALIGN_CENTER;break;case"right":t=a.EVENT_ALIGN_RIGHT}if(t){var n=this.findMenuItemElementByKey(t,e);n&&this.setCheckItemStatus(n,!0)}},t.tableMenu=null,t}(s.default);t.default=p},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(9)),l=n(2),c=n(1),u=n(6),d=function(){function e(t){this.options=t,e.modalContainerElement||this.initModal(),this.modalElement=this.createdModal()}return e.prototype.show=function(t){e.showModal?e.showModal.hide(!1):setTimeout((function(){return e.maskElement.classList.add(s.default.active)})),e.showModal=this,this.modalElement.style.left=l.addSizeUnit(t.left),this.modalElement.style.top=l.addSizeUnit(t.top),this.options.maskClassName&&e.maskElement.classList.add(this.options.maskClassName),this.modalElement.classList.add(s.default.active)},e.prototype.hide=function(t){void 0===t&&(t=!0),this.closeAllSubMenu(),this.modalElement.classList.remove(s.default.active),t&&e.maskElement.classList.remove(s.default.active),this.options.maskClassName&&e.maskElement.classList.remove(this.options.maskClassName),e.showModal=null},e.prototype.initModal=function(){e.modalContainerElement=this.createdModalContainer(),e.maskElement=this.createMask(),this.bind()},e.prototype.createdModalContainer=function(){var e=document.createElement("div");return e.classList.add(s.default.modalContainer),document.body.appendChild(e),e},e.prototype.createMask=function(){var t=document.createElement("div");return t.classList.add(s.default.mask),e.modalContainerElement.appendChild(t),t},e.prototype.createdModal=function(){var t=this,n=document.createElement("div");return n.classList.add(s.default.modal),new Promise((function(e){return e()})).then((function(){var i=t.contentRender();l.isString(i)?n.innerHTML=i:n.appendChild(i),e.modalContainerElement.appendChild(n)})),n},e.prototype.bind=function(){this.unBind(),e.modalContainerElement.addEventListener("mousedown",this.mousedownHandler),e.modalContainerElement.addEventListener("mouseover",this.mouseOverHandler)},e.prototype.unBind=function(){e.modalContainerElement.removeEventListener("mousedown",this.mousedownHandler),e.modalContainerElement.removeEventListener("mouseover",this.mouseOverHandler)},e.prototype.mousedownHandler=function(t){var n,i=this;if(t.target instanceof HTMLElement){if(t.target===e.maskElement)null===(n=e.showModal)||void 0===n||n.hide();else{var r=c.findParentElement(t.target,(function(t){var n;return[e.TYPE_MENU_ITEM,e.TYPE_CHECK_MENU_ITEM].includes(null!==(n=t.getAttribute("data-type"))&&void 0!==n?n:"")}),(function(e){return e===i.modalElement}),!0);r&&this.menuItemClickHandler(r.getAttribute("data-key"))}t.preventDefault(),t.stopPropagation()}},e.prototype.mouseOverHandler=function(t){var n=this;if(t.target instanceof HTMLElement){var i=c.findParentElement(t.target,(function(t){return t.getAttribute("data-type")===e.TYPE_SHOW_SUB_MENU_ITEM}),(function(e){return e===n.modalElement}),!0);if(i){var r=e.modalContainerElement.querySelector("[data-type="+e.TYPE_SUB_MENU+"][data-parent-key="+i.getAttribute("data-key")+"]");if(r){this.subMenuShowHandler(r);var o=i.getBoundingClientRect();r.style.left=o.left+o.width+"px",r.style.top=o.top+"px",r.classList.add(s.default.active),e.showSubModalElementList.push(r)}}else c.findParentElement(t.target,(function(t){return t.getAttribute("data-type")===e.TYPE_SUB_MENU}),(function(e){return e===n.modalElement}),!0)||this.closeAllSubMenu()}},e.prototype.createdSubMenu=function(e){var t=this,n=document.createElement("ul");return n.classList.add(s.default.modal),e.forEach((function(e){return n.appendChild(t.createdMenuItem(e,"li"))})),n},e.prototype.closeAllSubMenu=function(){e.showSubModalElementList.forEach((function(e){return e.classList.remove(s.default.active)})),e.showSubModalElementList=[]},e.prototype.createdMenuItem=function(t,n){var i,r,o,a,l,u,d,f=document.createElement(null!=n?n:"div");c.addClass(f,[s.default.menuItem,(i={},i[s.default.splitLineTop]=null!==(r=t.splitLineTop)&&void 0!==r&&r,i[s.default.splitLineBottom]=null!==(o=t.splitLineBottom)&&void 0!==o&&o,i)]),d=(null===(a=t.children)||void 0===a?void 0:a.length)?e.TYPE_SHOW_SUB_MENU_ITEM:"checkItem"===t.type?e.TYPE_CHECK_MENU_ITEM:e.TYPE_MENU_ITEM,f.setAttribute("data-type",d),f.setAttribute("data-key",t.key);var h=document.createElement("span");h.classList.add(s.default.title),"checkItem"===t.type?h.innerHTML='<span class="iconfont '+s.default.checkBox+'"></span>'+t.text:h.innerText=t.text;var p=document.createElement("span");if(p.classList.add(s.default.subTitle),p.innerText=null!==(l=t.subText)&&void 0!==l?l:"",f.appendChild(h),f.appendChild(p),null===(u=t.children)||void 0===u?void 0:u.length){var g=document.createElement("span");g.classList.add("iconfont","icon-arrow-right"),f.appendChild(g);var m=this.createdSubMenu(t.children);m.setAttribute("data-type",e.TYPE_SUB_MENU),m.setAttribute("data-parent-key",t.key),e.modalContainerElement.appendChild(m)}return f},e.prototype.setCheckItemStatus=function(e,t){var n=e.querySelector("."+s.default.checkBox);n&&c.hasClass(n,"icon-check")!==t&&(t?n.classList.add("icon-check"):n.classList.remove("icon-check"))},e.prototype.clearAllCheckedStatus=function(t){void 0===t&&(t=e.modalContainerElement),t.querySelectorAll("[data-type="+e.TYPE_CHECK_MENU_ITEM+"] ."+s.default.checkBox+".icon-check").forEach((function(e){return e.classList.remove("icon-check")}))},e.prototype.findMenuItemElementByKey=function(t,n){return void 0===n&&(n=e.modalContainerElement),n.querySelector("."+s.default.menuItem+"[data-key="+t+"]")},e.prototype.menuItemClickHandler=function(e){},e.prototype.subMenuShowHandler=function(e){},e.showModal=null,e.showSubModalElementList=[],e.TYPE_SHOW_SUB_MENU_ITEM="show-sub-menu-item",e.TYPE_MENU_ITEM="menu-item",e.TYPE_SUB_MENU="sub-menu",e.TYPE_CHECK_MENU_ITEM="check-menu-item",r([u.autoBind,o("design:type",Function),o("design:paramtypes",[MouseEvent]),o("design:returntype",void 0)],e.prototype,"mousedownHandler",null),r([u.autoBind,o("design:type",Function),o("design:paramtypes",[MouseEvent]),o("design:returntype",void 0)],e.prototype,"mouseOverHandler",null),r([u.override,o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"menuItemClickHandler",null),r([u.override,o("design:type",Function),o("design:paramtypes",[HTMLElement]),o("design:returntype",void 0)],e.prototype,"subMenuShowHandler",null),e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copy=void 0;var i=n(0);t.copy=function(e,t){void 0===t&&(t="text/plain");var n=document.createElement("span");n.textContent=e,n.addEventListener("copy",(function(n){n.preventDefault(),n.clipboardData?(n.clipboardData.clearData(),n.clipboardData.setData(t,e)):window.clipboardData&&(window.clipboardData.clearData(),window.clipboardData.setData("text/plain"===t?"Text":"Url",e))})),document.body.appendChild(n);var r=i.getRange(),o=document.createRange();o.selectNodeContents(n),i.setSelectionFocus(o),document.execCommand("copy"),i.setSelectionFocus(r),n.remove()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addScript=void 0,t.addScript=function(e,t){return new Promise((function(n,i){if(document.getElementById(t))n();else{var r=document.createElement("script");r.src=e,r.async=!0,r.onerror=function(e){i(e)},r.onload=function(){document.getElementById(t)?r.remove():r.id=t,n()},document.head.appendChild(r)}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createdLute=void 0,t.createdLute=function(e){var t=window.Lute.New();return t.PutEmojis(e.emojis),t.SetEmojiSite(e.emojiSite),t.SetHeadingAnchor(e.headingAnchor),t.SetInlineMathAllowDigitAfterOpenMarker(e.inlineMathDigit),t.SetAutoSpace(e.autoSpace),t.SetToC(e.toc),t.SetFootnotes(e.footnotes),t.SetChinesePunct(e.chinesePunct),t.SetFixTermTypo(e.fixTermTypo),t.SetVditorCodeBlockPreview(e.codeBlockPreview),t.SetSetext(e.setext),t.SetSanitize(e.sanitize),t.SetChineseParagraphBeginningSpace(e.paragraphBeginningSpace),t.SetRenderListStyle(e.listStyle),t.SetLinkBase(e.linkBase),e.lazyLoadImage&&t.SetImageLazyLoading(e.lazyLoadImage),t}},function(e,t,n){},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(29)),o=n(0),a=function(){function e(e){this.redoStack=[],this.undoStack=[],this.lastText="",this.dmp=new r.default,this.editor=e}return e.prototype.addToUndoStack=function(){var t=this.getContents(),n=this.dmp.diff_main(t,this.lastText),i=this.dmp.patch_make(t,this.lastText,n);this.lastText=t,this.undoStack.length>e.stackSize-1&&this.undoStack.shift(),this.undoStack.push(i)},e.prototype.undo=function(){if(this.undoStack.length&&this.editor.ir){var e=this.undoStack.pop();this.redoStack.push(e),this.lastText=this.dmp.patch_apply(e,this.lastText)[0],this.editor.ir.contentDom.innerHTML=this.lastText,o.setRangeByWbr(this.editor.ir.contentDom)}},e.prototype.redo=function(){if(this.redoStack.length&&this.editor.ir){console.log("redo");var e=this.redoStack.pop();this.undoStack.push(e);var t=this.dmp.patch_deepCopy(e).reverse();t.forEach((function(e){return e.diffs.forEach((function(e){return e[0]=-e[0]}))})),this.lastText=this.dmp.patch_apply(t,this.lastText)[0],this.editor.ir.contentDom.innerHTML=this.lastText,o.setRangeByWbr(this.editor.ir.contentDom)}},e.prototype.getContents=function(){if(this.editor.ir){if(this.editor.ir.contentDom.querySelector("wbr"))return this.editor.ir.contentDom.innerHTML;var e=document.createElement("wbr"),t=o.getRange();t&&t.insertNode(e);var n=this.editor.ir.contentDom.innerHTML;return e.remove(),n}return""},e.stackSize=50,e}();t.default=a},function(e,t){var n=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32};n.Diff=function(e,t){return[e,t]},n.prototype.diff_main=function(e,t,i,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=r;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[new n.Diff(0,e)]:[];void 0===i&&(i=!0);var a=i,s=this.diff_commonPrefix(e,t),l=e.substring(0,s);e=e.substring(s),t=t.substring(s),s=this.diff_commonSuffix(e,t);var c=e.substring(e.length-s);e=e.substring(0,e.length-s),t=t.substring(0,t.length-s);var u=this.diff_compute_(e,t,a,o);return l&&u.unshift(new n.Diff(0,l)),c&&u.push(new n.Diff(0,c)),this.diff_cleanupMerge(u),u},n.prototype.diff_compute_=function(e,t,i,r){var o;if(!e)return[new n.Diff(1,t)];if(!t)return[new n.Diff(-1,e)];var a=e.length>t.length?e:t,s=e.length>t.length?t:e,l=a.indexOf(s);if(-1!=l)return o=[new n.Diff(1,a.substring(0,l)),new n.Diff(0,s),new n.Diff(1,a.substring(l+s.length))],e.length>t.length&&(o[0][0]=o[2][0]=-1),o;if(1==s.length)return[new n.Diff(-1,e),new n.Diff(1,t)];var c=this.diff_halfMatch_(e,t);if(c){var u=c[0],d=c[1],f=c[2],h=c[3],p=c[4],g=this.diff_main(u,f,i,r),m=this.diff_main(d,h,i,r);return g.concat([new n.Diff(0,p)],m)}return i&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,r):this.diff_bisect_(e,t,r)},n.prototype.diff_lineMode_=function(e,t,i){var r=this.diff_linesToChars_(e,t);e=r.chars1,t=r.chars2;var o=r.lineArray,a=this.diff_main(e,t,!1,i);this.diff_charsToLines_(a,o),this.diff_cleanupSemantic(a),a.push(new n.Diff(0,""));for(var s=0,l=0,c=0,u="",d="";s<a.length;){switch(a[s][0]){case 1:c++,d+=a[s][1];break;case-1:l++,u+=a[s][1];break;case 0:if(l>=1&&c>=1){a.splice(s-l-c,l+c),s=s-l-c;for(var f=this.diff_main(u,d,!1,i),h=f.length-1;h>=0;h--)a.splice(s,0,f[h]);s+=f.length}c=0,l=0,u="",d=""}s++}return a.pop(),a},n.prototype.diff_bisect_=function(e,t,i){for(var r=e.length,o=t.length,a=Math.ceil((r+o)/2),s=a,l=2*a,c=new Array(l),u=new Array(l),d=0;d<l;d++)c[d]=-1,u[d]=-1;c[s+1]=0,u[s+1]=0;for(var f=r-o,h=f%2!=0,p=0,g=0,m=0,v=0,_=0;_<a&&!((new Date).getTime()>i);_++){for(var y=-_+p;y<=_-g;y+=2){for(var E=s+y,b=(C=y==-_||y!=_&&c[E-1]<c[E+1]?c[E+1]:c[E-1]+1)-y;C<r&&b<o&&e.charAt(C)==t.charAt(b);)C++,b++;if(c[E]=C,C>r)g+=2;else if(b>o)p+=2;else if(h){if((M=s+f-y)>=0&&M<l&&-1!=u[M])if(C>=(T=r-u[M]))return this.diff_bisectSplit_(e,t,C,b,i)}}for(var w=-_+m;w<=_-v;w+=2){for(var T,M=s+w,D=(T=w==-_||w!=_&&u[M-1]<u[M+1]?u[M+1]:u[M-1]+1)-w;T<r&&D<o&&e.charAt(r-T-1)==t.charAt(o-D-1);)T++,D++;if(u[M]=T,T>r)v+=2;else if(D>o)m+=2;else if(!h){if((E=s+f-w)>=0&&E<l&&-1!=c[E]){var C;b=s+(C=c[E])-E;if(C>=(T=r-T))return this.diff_bisectSplit_(e,t,C,b,i)}}}}return[new n.Diff(-1,e),new n.Diff(1,t)]},n.prototype.diff_bisectSplit_=function(e,t,n,i,r){var o=e.substring(0,n),a=t.substring(0,i),s=e.substring(n),l=t.substring(i),c=this.diff_main(o,a,!1,r),u=this.diff_main(s,l,!1,r);return c.concat(u)},n.prototype.diff_linesToChars_=function(e,t){var n=[],i={};function r(e){for(var t="",r=0,a=-1,s=n.length;a<e.length-1;){-1==(a=e.indexOf("\n",r))&&(a=e.length-1);var l=e.substring(r,a+1);(i.hasOwnProperty?i.hasOwnProperty(l):void 0!==i[l])?t+=String.fromCharCode(i[l]):(s==o&&(l=e.substring(r),a=e.length),t+=String.fromCharCode(s),i[l]=s,n[s++]=l),r=a+1}return t}n[0]="";var o=4e4,a=r(e);return o=65535,{chars1:a,chars2:r(t),lineArray:n}},n.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n][1],r=[],o=0;o<i.length;o++)r[o]=t[i.charCodeAt(o)];e[n][1]=r.join("")}},n.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,i=Math.min(e.length,t.length),r=i,o=0;n<r;)e.substring(o,r)==t.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},n.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,i=Math.min(e.length,t.length),r=i,o=0;n<r;)e.substring(e.length-r,e.length-o)==t.substring(t.length-r,t.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},n.prototype.diff_commonOverlap_=function(e,t){var n=e.length,i=t.length;if(0==n||0==i)return 0;n>i?e=e.substring(n-i):n<i&&(t=t.substring(0,n));var r=Math.min(n,i);if(e==t)return r;for(var o=0,a=1;;){var s=e.substring(r-a),l=t.indexOf(s);if(-1==l)return o;a+=l,0!=l&&e.substring(r-a)!=t.substring(0,a)||(o=a,a++)}},n.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,i=e.length>t.length?t:e;if(n.length<4||2*i.length<n.length)return null;var r=this;function o(e,t,n){for(var i,o,a,s,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,u="";-1!=(c=t.indexOf(l,c+1));){var d=r.diff_commonPrefix(e.substring(n),t.substring(c)),f=r.diff_commonSuffix(e.substring(0,n),t.substring(0,c));u.length<f+d&&(u=t.substring(c-f,c)+t.substring(c,c+d),i=e.substring(0,n-f),o=e.substring(n+d),a=t.substring(0,c-f),s=t.substring(c+d))}return 2*u.length>=e.length?[i,o,a,s,u]:null}var a,s,l,c,u,d=o(n,i,Math.ceil(n.length/4)),f=o(n,i,Math.ceil(n.length/2));return d||f?(a=f?d&&d[4].length>f[4].length?d:f:d,e.length>t.length?(s=a[0],l=a[1],c=a[2],u=a[3]):(c=a[0],u=a[1],s=a[2],l=a[3]),[s,l,c,u,a[4]]):null},n.prototype.diff_cleanupSemantic=function(e){for(var t=!1,i=[],r=0,o=null,a=0,s=0,l=0,c=0,u=0;a<e.length;)0==e[a][0]?(i[r++]=a,s=c,l=u,c=0,u=0,o=e[a][1]):(1==e[a][0]?c+=e[a][1].length:u+=e[a][1].length,o&&o.length<=Math.max(s,l)&&o.length<=Math.max(c,u)&&(e.splice(i[r-1],0,new n.Diff(-1,o)),e[i[r-1]+1][0]=1,r--,a=--r>0?i[r-1]:-1,s=0,l=0,c=0,u=0,o=null,t=!0)),a++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),a=1;a<e.length;){if(-1==e[a-1][0]&&1==e[a][0]){var d=e[a-1][1],f=e[a][1],h=this.diff_commonOverlap_(d,f),p=this.diff_commonOverlap_(f,d);h>=p?(h>=d.length/2||h>=f.length/2)&&(e.splice(a,0,new n.Diff(0,f.substring(0,h))),e[a-1][1]=d.substring(0,d.length-h),e[a+1][1]=f.substring(h),a++):(p>=d.length/2||p>=f.length/2)&&(e.splice(a,0,new n.Diff(0,d.substring(0,p))),e[a-1][0]=1,e[a-1][1]=f.substring(0,f.length-p),e[a+1][0]=-1,e[a+1][1]=d.substring(p),a++),a++}a++}},n.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var i=e.charAt(e.length-1),r=t.charAt(0),o=i.match(n.nonAlphaNumericRegex_),a=r.match(n.nonAlphaNumericRegex_),s=o&&i.match(n.whitespaceRegex_),l=a&&r.match(n.whitespaceRegex_),c=s&&i.match(n.linebreakRegex_),u=l&&r.match(n.linebreakRegex_),d=c&&e.match(n.blanklineEndRegex_),f=u&&t.match(n.blanklineStartRegex_);return d||f?5:c||u?4:o&&!s&&l?3:s||l?2:o||a?1:0}for(var i=1;i<e.length-1;){if(0==e[i-1][0]&&0==e[i+1][0]){var r=e[i-1][1],o=e[i][1],a=e[i+1][1],s=this.diff_commonSuffix(r,o);if(s){var l=o.substring(o.length-s);r=r.substring(0,r.length-s),o=l+o.substring(0,o.length-s),a=l+a}for(var c=r,u=o,d=a,f=t(r,o)+t(o,a);o.charAt(0)===a.charAt(0);){r+=o.charAt(0),o=o.substring(1)+a.charAt(0),a=a.substring(1);var h=t(r,o)+t(o,a);h>=f&&(f=h,c=r,u=o,d=a)}e[i-1][1]!=c&&(c?e[i-1][1]=c:(e.splice(i-1,1),i--),e[i][1]=u,d?e[i+1][1]=d:(e.splice(i+1,1),i--))}i++}},n.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,n.whitespaceRegex_=/\s/,n.linebreakRegex_=/[\r\n]/,n.blanklineEndRegex_=/\n\r?\n$/,n.blanklineStartRegex_=/^\r?\n\r?\n/,n.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,i=[],r=0,o=null,a=0,s=!1,l=!1,c=!1,u=!1;a<e.length;)0==e[a][0]?(e[a][1].length<this.Diff_EditCost&&(c||u)?(i[r++]=a,s=c,l=u,o=e[a][1]):(r=0,o=null),c=u=!1):(-1==e[a][0]?u=!0:c=!0,o&&(s&&l&&c&&u||o.length<this.Diff_EditCost/2&&s+l+c+u==3)&&(e.splice(i[r-1],0,new n.Diff(-1,o)),e[i[r-1]+1][0]=1,r--,o=null,s&&l?(c=u=!0,r=0):(a=--r>0?i[r-1]:-1,c=u=!1),t=!0)),a++;t&&this.diff_cleanupMerge(e)},n.prototype.diff_cleanupMerge=function(e){e.push(new n.Diff(0,""));for(var t,i=0,r=0,o=0,a="",s="";i<e.length;)switch(e[i][0]){case 1:o++,s+=e[i][1],i++;break;case-1:r++,a+=e[i][1],i++;break;case 0:r+o>1?(0!==r&&0!==o&&(0!==(t=this.diff_commonPrefix(s,a))&&(i-r-o>0&&0==e[i-r-o-1][0]?e[i-r-o-1][1]+=s.substring(0,t):(e.splice(0,0,new n.Diff(0,s.substring(0,t))),i++),s=s.substring(t),a=a.substring(t)),0!==(t=this.diff_commonSuffix(s,a))&&(e[i][1]=s.substring(s.length-t)+e[i][1],s=s.substring(0,s.length-t),a=a.substring(0,a.length-t))),i-=r+o,e.splice(i,r+o),a.length&&(e.splice(i,0,new n.Diff(-1,a)),i++),s.length&&(e.splice(i,0,new n.Diff(1,s)),i++),i++):0!==i&&0==e[i-1][0]?(e[i-1][1]+=e[i][1],e.splice(i,1)):i++,o=0,r=0,a="",s=""}""===e[e.length-1][1]&&e.pop();var l=!1;for(i=1;i<e.length-1;)0==e[i-1][0]&&0==e[i+1][0]&&(e[i][1].substring(e[i][1].length-e[i-1][1].length)==e[i-1][1]?(e[i][1]=e[i-1][1]+e[i][1].substring(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),l=!0):e[i][1].substring(0,e[i+1][1].length)==e[i+1][1]&&(e[i-1][1]+=e[i+1][1],e[i][1]=e[i][1].substring(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),l=!0)),i++;l&&this.diff_cleanupMerge(e)},n.prototype.diff_xIndex=function(e,t){var n,i=0,r=0,o=0,a=0;for(n=0;n<e.length&&(1!==e[n][0]&&(i+=e[n][1].length),-1!==e[n][0]&&(r+=e[n][1].length),!(i>t));n++)o=i,a=r;return e.length!=n&&-1===e[n][0]?a:a+(t-o)},n.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,i=/</g,r=/>/g,o=/\n/g,a=0;a<e.length;a++){var s=e[a][0],l=e[a][1].replace(n,"&amp;").replace(i,"&lt;").replace(r,"&gt;").replace(o,"&para;<br>");switch(s){case 1:t[a]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case-1:t[a]='<del style="background:#ffe6e6;">'+l+"</del>";break;case 0:t[a]="<span>"+l+"</span>"}}return t.join("")},n.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)-1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_levenshtein=function(e){for(var t=0,n=0,i=0,r=0;r<e.length;r++){var o=e[r][0],a=e[r][1];switch(o){case 1:n+=a.length;break;case-1:i+=a.length;break;case 0:t+=Math.max(n,i),n=0,i=0}}return t+=Math.max(n,i)},n.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case 1:t[n]="+"+encodeURI(e[n][1]);break;case-1:t[n]="-"+e[n][1].length;break;case 0:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},n.prototype.diff_fromDelta=function(e,t){for(var i=[],r=0,o=0,a=t.split(/\t/g),s=0;s<a.length;s++){var l=a[s].substring(1);switch(a[s].charAt(0)){case"+":try{i[r++]=new n.Diff(1,decodeURI(l))}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var c=parseInt(l,10);if(isNaN(c)||c<0)throw new Error("Invalid number in diff_fromDelta: "+l);var u=e.substring(o,o+=c);"="==a[s].charAt(0)?i[r++]=new n.Diff(0,u):i[r++]=new n.Diff(-1,u);break;default:if(a[s])throw new Error("Invalid diff operation in diff_fromDelta: "+a[s])}}if(o!=e.length)throw new Error("Delta length ("+o+") does not equal source text length ("+e.length+").");return i},n.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},n.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(t),r=this;function o(e,i){var o=e/t.length,a=Math.abs(n-i);return r.Match_Distance?o+a/r.Match_Distance:a?1:o}var a=this.Match_Threshold,s=e.indexOf(t,n);-1!=s&&(a=Math.min(o(0,s),a),-1!=(s=e.lastIndexOf(t,n+t.length))&&(a=Math.min(o(0,s),a)));var l,c,u=1<<t.length-1;s=-1;for(var d,f=t.length+e.length,h=0;h<t.length;h++){for(l=0,c=f;l<c;)o(h,n+c)<=a?l=c:f=c,c=Math.floor((f-l)/2+l);f=c;var p=Math.max(1,n-c+1),g=Math.min(n+c,e.length)+t.length,m=Array(g+2);m[g+1]=(1<<h)-1;for(var v=g;v>=p;v--){var _=i[e.charAt(v-1)];if(m[v]=0===h?(m[v+1]<<1|1)&_:(m[v+1]<<1|1)&_|(d[v+1]|d[v])<<1|1|d[v+1],m[v]&u){var y=o(h,v-1);if(y<=a){if(a=y,!((s=v-1)>n))break;p=Math.max(1,2*n-s)}}}if(o(h+1,n)>a)break;d=m}return s},n.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},n.prototype.patch_addContext_=function(e,t){if(0!=t.length){if(null===e.start2)throw Error("patch not initialized");for(var i=t.substring(e.start2,e.start2+e.length1),r=0;t.indexOf(i)!=t.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,i=t.substring(e.start2-r,e.start2+e.length1+r);r+=this.Patch_Margin;var o=t.substring(e.start2-r,e.start2);o&&e.diffs.unshift(new n.Diff(0,o));var a=t.substring(e.start2+e.length1,e.start2+e.length1+r);a&&e.diffs.push(new n.Diff(0,a)),e.start1-=o.length,e.start2-=o.length,e.length1+=o.length+a.length,e.length2+=o.length+a.length}},n.prototype.patch_make=function(e,t,i){var r,o;if("string"==typeof e&&"string"==typeof t&&void 0===i)r=e,(o=this.diff_main(r,t,!0)).length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(e&&"object"==typeof e&&void 0===t&&void 0===i)o=e,r=this.diff_text1(o);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===i)r=e,o=t;else{if("string"!=typeof e||"string"!=typeof t||!i||"object"!=typeof i)throw new Error("Unknown call format to patch_make.");r=e,o=i}if(0===o.length)return[];for(var a=[],s=new n.patch_obj,l=0,c=0,u=0,d=r,f=r,h=0;h<o.length;h++){var p=o[h][0],g=o[h][1];switch(l||0===p||(s.start1=c,s.start2=u),p){case 1:s.diffs[l++]=o[h],s.length2+=g.length,f=f.substring(0,u)+g+f.substring(u);break;case-1:s.length1+=g.length,s.diffs[l++]=o[h],f=f.substring(0,u)+f.substring(u+g.length);break;case 0:g.length<=2*this.Patch_Margin&&l&&o.length!=h+1?(s.diffs[l++]=o[h],s.length1+=g.length,s.length2+=g.length):g.length>=2*this.Patch_Margin&&l&&(this.patch_addContext_(s,d),a.push(s),s=new n.patch_obj,l=0,d=f,c=u)}1!==p&&(c+=g.length),-1!==p&&(u+=g.length)}return l&&(this.patch_addContext_(s,d),a.push(s)),a},n.prototype.patch_deepCopy=function(e){for(var t=[],i=0;i<e.length;i++){var r=e[i],o=new n.patch_obj;o.diffs=[];for(var a=0;a<r.diffs.length;a++)o.diffs[a]=new n.Diff(r.diffs[a][0],r.diffs[a][1]);o.start1=r.start1,o.start2=r.start2,o.length1=r.length1,o.length2=r.length2,t[i]=o}return t},n.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var i=0,r=[],o=0;o<e.length;o++){var a,s,l=e[o].start2+i,c=this.diff_text1(e[o].diffs),u=-1;if(c.length>this.Match_MaxBits?-1!=(a=this.match_main(t,c.substring(0,this.Match_MaxBits),l))&&(-1==(u=this.match_main(t,c.substring(c.length-this.Match_MaxBits),l+c.length-this.Match_MaxBits))||a>=u)&&(a=-1):a=this.match_main(t,c,l),-1==a)r[o]=!1,i-=e[o].length2-e[o].length1;else if(r[o]=!0,i=a-l,c==(s=-1==u?t.substring(a,a+c.length):t.substring(a,u+this.Match_MaxBits)))t=t.substring(0,a)+this.diff_text2(e[o].diffs)+t.substring(a+c.length);else{var d=this.diff_main(c,s,!1);if(c.length>this.Match_MaxBits&&this.diff_levenshtein(d)/c.length>this.Patch_DeleteThreshold)r[o]=!1;else{this.diff_cleanupSemanticLossless(d);for(var f,h=0,p=0;p<e[o].diffs.length;p++){var g=e[o].diffs[p];0!==g[0]&&(f=this.diff_xIndex(d,h)),1===g[0]?t=t.substring(0,a+f)+g[1]+t.substring(a+f):-1===g[0]&&(t=t.substring(0,a+f)+t.substring(a+this.diff_xIndex(d,h+g[1].length))),-1!==g[0]&&(h+=g[1].length)}}}}return[t=t.substring(n.length,t.length-n.length),r]},n.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,i="",r=1;r<=t;r++)i+=String.fromCharCode(r);for(r=0;r<e.length;r++)e[r].start1+=t,e[r].start2+=t;var o=e[0],a=o.diffs;if(0==a.length||0!=a[0][0])a.unshift(new n.Diff(0,i)),o.start1-=t,o.start2-=t,o.length1+=t,o.length2+=t;else if(t>a[0][1].length){var s=t-a[0][1].length;a[0][1]=i.substring(a[0][1].length)+a[0][1],o.start1-=s,o.start2-=s,o.length1+=s,o.length2+=s}if(0==(a=(o=e[e.length-1]).diffs).length||0!=a[a.length-1][0])a.push(new n.Diff(0,i)),o.length1+=t,o.length2+=t;else if(t>a[a.length-1][1].length){s=t-a[a.length-1][1].length;a[a.length-1][1]+=i.substring(0,s),o.length1+=s,o.length2+=s}return i},n.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,i=0;i<e.length;i++)if(!(e[i].length1<=t)){var r=e[i];e.splice(i--,1);for(var o=r.start1,a=r.start2,s="";0!==r.diffs.length;){var l=new n.patch_obj,c=!0;for(l.start1=o-s.length,l.start2=a-s.length,""!==s&&(l.length1=l.length2=s.length,l.diffs.push(new n.Diff(0,s)));0!==r.diffs.length&&l.length1<t-this.Patch_Margin;){var u=r.diffs[0][0],d=r.diffs[0][1];1===u?(l.length2+=d.length,a+=d.length,l.diffs.push(r.diffs.shift()),c=!1):-1===u&&1==l.diffs.length&&0==l.diffs[0][0]&&d.length>2*t?(l.length1+=d.length,o+=d.length,c=!1,l.diffs.push(new n.Diff(u,d)),r.diffs.shift()):(d=d.substring(0,t-l.length1-this.Patch_Margin),l.length1+=d.length,o+=d.length,0===u?(l.length2+=d.length,a+=d.length):c=!1,l.diffs.push(new n.Diff(u,d)),d==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(d.length))}s=(s=this.diff_text2(l.diffs)).substring(s.length-this.Patch_Margin);var f=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);""!==f&&(l.length1+=f.length,l.length2+=f.length,0!==l.diffs.length&&0===l.diffs[l.diffs.length-1][0]?l.diffs[l.diffs.length-1][1]+=f:l.diffs.push(new n.Diff(0,f))),c||e.splice(++i,0,l)}}},n.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},n.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var i=e.split("\n"),r=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<i.length;){var a=i[r].match(o);if(!a)throw new Error("Invalid patch string: "+i[r]);var s=new n.patch_obj;for(t.push(s),s.start1=parseInt(a[1],10),""===a[2]?(s.start1--,s.length1=1):"0"==a[2]?s.length1=0:(s.start1--,s.length1=parseInt(a[2],10)),s.start2=parseInt(a[3],10),""===a[4]?(s.start2--,s.length2=1):"0"==a[4]?s.length2=0:(s.start2--,s.length2=parseInt(a[4],10)),r++;r<i.length;){var l=i[r].charAt(0);try{var c=decodeURI(i[r].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+c)}if("-"==l)s.diffs.push(new n.Diff(-1,c));else if("+"==l)s.diffs.push(new n.Diff(1,c));else if(" "==l)s.diffs.push(new n.Diff(0,c));else{if("@"==l)break;if(""!==l)throw new Error('Invalid patch mode "'+l+'" in: '+c)}r++}}return t},(n.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:e="+";break;case-1:e="-";break;case 0:e=" "}t[n+1]=e+encodeURI(this.diffs[n][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=n,e.exports.diff_match_patch=n,e.exports.DIFF_DELETE=-1,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0}]);